{{/* We're in a range site.Menus.main */}}
{{- with .Page }}

{{- $bg := "bg-neutral-800" }}
{{- if .Params.SectionBG }} {{- $bg = .Params.SectionBG }} {{- end }}

<section class="{{ $bg }} flex justify-center w-full">
    <div class="grid lg:max-w-6xl md:max-w-4xl w-full gap-4 p-6 justify-start text-xl ">
        {{/*  Title  */}}
        <h3 class="text-3xl font-bold">{{- .Params.ShortDesc | safeHTML -}}</h3>
        <div>
            {{/* Get first paragraph */}}
            {{- index (split .Content "</p>" ) 0 | safeHTML -}}
        </div>

        {{/* If the section page has subpages, render top 3 */}}
        {{ if .Pages }}
        <div class="grid md:grid-cols-3 auto-rows-fr gap-6 my-6 border border-red-500">
            {{ range $idx, $page := .Pages }}
            {{ if lt $idx 3}}
            {{ partial "card.html" $page }}
            {{ end }}
            {{ end }}
        </div>
        {{- else }}
        <div class="my-6">no subpage</div>
        {{ end }}

        <a class="p-4 max-w-fit bg-quinary text-neutral-900 hover:bg-primary font-medium rounded-md"
            href="{{- .RelPermalink -}}">
            See more...
        </a>
    </div>
</section>
{{- end }}